var UIReticuleCalculate={createNew:function(){function l(){t.html('<div class="col-md-12 col-sm-12 col-xs-12">                <div class="x_panel">                    <div class="x_title">                        <h2>手提袋报价 <small>功能描述：此处通过输入条件，计算手提袋的报价。</small></h2>                        <div class="clearfix"></div>                    </div>                    <div class="x_content">                        <div class="form-horizontal form-label-left">                            <div class="form-group">                                <label class="control-label col-md-1 col-sm-1 col-xs-12">长(mm)</label>                                <div class="col-md-2 col-sm-2 col-xs-12">                                    <input id="input_len" type="text" class="form-control" placeholder="">                                </div>                                <label class="control-label col-md-1 col-sm-1 col-xs-12">宽(mm)</label>                                <div class="col-md-2 col-sm-2 col-xs-12">                                    <input id="input_width" type="text" class="form-control" placeholder="">                                </div>                                <label class="control-label col-md-1 col-sm-1 col-xs-12">高(mm)</label>                                <div class="col-md-2 col-sm-2 col-xs-12">                                    <input id="input_height" type="text" class="form-control" placeholder="">                                </div>                                <label class="control-label col-md-1 col-sm-1 col-xs-12">数量(个)</label>                                <div class="col-md-2 col-sm-2 col-xs-12">                                    <input id="input_count" type="text" class="form-control" placeholder="">                                </div>                            </div>                            <div class = "form-group" >                                 <label class="control-label col-md-1 col-sm-1 col-xs-12">制作材质</label>                                <div class="col-md-11 col-sm-11 col-xs-12">                                    <select id="select_source_type" class="form-control">                                    </select>                                </div>                            </div>                            <div class = "form-group" >                                 <label class="control-label col-md-1 col-sm-1 col-xs-12">是否覆膜</label>                                <div class="col-md-2 col-sm-2 col-xs-12">                                    <input class="check_green" type="checkbox" id="check_is_film" checked="" required />                                </div>                                <label class="control-label col-md-1 col-sm-1 col-xs-12">是否印刷</label>                                <div class="col-md-2 col-sm-2 col-xs-12">                                    <input class="check_green" type="checkbox" id="check_is_press" checked="" required />                                </div>                                <label id="label_press_type" class="control-label col-md-1 col-sm-1 col-xs-12">印刷方式</label>                                <div class="col-md-5 col-sm-5 col-xs-12">                                    <select id="select_press_type" class="form-control">                                    </select>                                </div>                            </div>                            <div class = "form-group" >                                 <label class="control-label col-md-1 col-sm-1 col-xs-12">选择配件</label>                                <div class="col-md-11 col-sm-11 col-xs-12">                                    <div class="tabbable tabs-below">                                        <ul class="nav nav-tabs" id="tab_part_type">                                            <li class="active"><a href="#测试" data-toggle="tab">Section 1</a></li>                                            <li><a href="#btab2" data-toggle="tab">Section 2</a></li>                                            <li><a href="#btab3" data-toggle="tab">Section 3</a></li>                                            <li><a href="#btab4" data-toggle="tab">Section 4</a></li>                                            <li><a href="#btab5" data-toggle="tab">Section 5</a></li>                                            <li><a href="#btab6" data-toggle="tab">Section 6</a></li>                                            <li><a href="#btab7" data-toggle="tab">Section 7</a></li>                                            <li><a href="#btab8" data-toggle="tab">Section 8</a></li>                                            <li><a href="#btab9" data-toggle="tab">Section 9</a></li>                                       </ul>                                       <div class="tab-content form-group" id="tab_part_content">                                            <div class="tab-pane active" id="测试">                                                <input class="check_aero" type="checkbox" checked="checked"> 蝴蝶结1                                                <input class="check_aero" type="checkbox" checked="checked"> 蝴蝶结2                                                <input class="check_aero" type="checkbox" class="flat" checked="checked"> 蝴蝶结3                                            </div>                                            <div class="tab-pane" id="btab2">                                              <p>Howdy, Im in Section 2.</p>                                            </div>                                            <div class="tab-pane" id="btab3">                                              <p>Howdy, Im in Section 3.</p>                                            </div>                                            <div class="tab-pane" id="btab4">                                              <p>Howdy, Im in Section 4.</p>                                            </div>                                            <div class="tab-pane" id="btab5">                                              <p>Howdy, Im in Section 5.</p>                                            </div>                                            <div class="tab-pane" id="btab6">                                              <p>Howdy, Im in Section 6.</p>                                            </div>                                            <div class="tab-pane" id="btab7">                                              <p>Howdy, Im in Section 7.</p>                                            </div>                                            <div class="tab-pane" id="btab8">                                              <p>Howdy, m in Section 8.</p>                                            </div>                                            <div class="tab-pane" id="btab9">                                              <p>Howdy, Im in Section 9.</p>                                            </div>                                        </div>                                    </div>                                    <br>                                    <br>                                    <table id="selectpart_table" class="table table-striped table-bordered">                                    <thead>                                        <tr>                                            <th>配件名称</th>                                            <th>配件类别</th>                                        </tr>                                    </thead>                                    <tbody>                                    </tbody>                                </table>                                </div>                            </div>                            </div>                            <div class = "ln_solid" >                             </div>                            <div class="form-horizontal form-label-left">                                <div class = "form-group" >                                     <div class = "col-md-5 col-sm-5 col-xs-12 col-md-offset-1" >                                        <button id = "submit_count" class = "btn btn-danger" >&nbsp;&nbsp;&nbsp;&nbsp;计&nbsp;&nbsp;算&nbsp;&nbsp;&nbsp;&nbsp;</button>                                    </div >                                     <label class="control-label col-md-1 col-sm-1 col-xs-12">总价</label>                                    <div class="col-md-2 col-sm-2 col-xs-12">                                        <input id="input_total_price" type="text" class="form-control" placeholder="" readonly>                                    </div>                                    <label class="control-label col-md-1 col-sm-1 col-xs-12">单价</label>                                    <div class="col-md-2 col-sm-2 col-xs-12">                                        <input id="input_single_price" type="text" class="form-control" placeholder="" readonly>                                    </div>                                </div>                                <div class = "form-group" >                                     <div class = "col-md-11 col-sm-11 col-xs-12 col-md-offset-1" >                                        <table id="log_table" class="table table-striped table-bordered">                                            <thead>                                                <tr>                                                    <th>类型</th>                                                    <th>日志</th>                                                </tr>                                            </thead>                                        </table>                                    </div >                                 </div>                            </div>                        </div >                     </div>                </div>                </div>                <div class="col-md-12 col-sm-12 col-xs-12">                <div class="x_panel">                <div class="x_title">                    <h2>保存订单 <small>功能描述：保存订单客户信息，用于后续查询与下单。</small></h2>                    <div class="clearfix"></div>                </div>                <div class="x_content">                    <div class="form-horizontal form-label-left">                        <div class="form-group">                            <label class="control-label col-md-1 col-sm-1 col-xs-12">客户名称</label>                            <div class="col-md-8 col-sm-8 col-xs-12">                                <input id="input_customer" type="text" class="form-control" placeholder="">                            </div>                            <label class="control-label col-md-1 col-sm-1 col-xs-12">最终总价</label>                            <div class="col-md-2 col-sm-2 col-xs-12">                                <input id="input_finalprice" type="text" class="form-control" placeholder="">                            </div>                        </div>                    </div>                    <div class = "ln_solid" >                     </div>                    <div class="form-horizontal form-label-left">                        <div class = "form-group" >                             <div class = "col-md-5 col-sm-5 col-xs-12 col-md-offset-1" >                                <button id = "submit_save" class = "btn btn-danger" >&nbsp;&nbsp;&nbsp;&nbsp;保&nbsp;&nbsp;存&nbsp;&nbsp;&nbsp;&nbsp;</button>                            </div >                         </div>                    </div>                </div >             </div>            </div>            </div>'),e=$("#submit_count"),c=$("#select_source_type"),s=$("#label_press_type"),o=$("#select_press_type"),i=$("#tab_part_type"),r=$("#tab_part_content"),n=$("#selectpart_table"),d=$("#input_len"),p=$("#input_width"),b=$("#input_height"),m=$("#input_count"),v=$("#check_is_film"),u=$("#check_is_press"),f=$("#input_customer"),_=$("#input_finalprice"),g=$("#submit_save"),$("#check_is_press").on("ifChecked",function(l){s.show(),o.show()}).on("ifUnchecked",function(l){s.hide(),o.hide()}),$(".check_green").iCheck({checkboxClass:"icheckbox_flat-green"}),$(".icheckbox_flat-green").css("margin-top","8px"),g.prop("disabled",!0),h.length=0,$.ajax({type:"POST",url:"sourcetype-all.zc",cache:!1,data:JSON.stringify("{'get':'all'}"),dataType:"json",success:function(l){if(0==l.data.length)return c.html(""),void toastr.error("暂未配置制作材质信息，请前往配置！");for(var a="",t=0;t<l.data.length;t++){a+="<option>"+l.data[t].name+"</option>"}c.html(a),null!=y&&c.val(y)},error:function(){c.html(""),toastr.error("获取制作材质信息失败,请刷新重试！")}}),$.ajax({type:"POST",url:"presstype-all.zc",cache:!1,data:JSON.stringify("{'get':'all'}"),dataType:"json",success:function(l){if(0==l.data.length)return o.html(""),void toastr.error("暂未配置印刷方式信息，请前往配置！");for(var a="",t=0;t<l.data.length;t++){a+="<option>"+l.data[t].name+"</option>"}o.html(a),null!=y&&o.val(x)},error:function(){o.html(""),toastr.error("获取印刷方式信息失败,请刷新重试！")}}),$.ajax({type:"POST",url:"parttype-all.zc",cache:!1,data:JSON.stringify("{'get':'all'}"),dataType:"json",success:function(l){if(0==l.data.length)return i.html(""),r.html(""),void toastr.error("暂未配置配件种类信息，请前往配置！");for(var a="",t="",e=0;e<l.data.length;e++){if(0==e)var c="<li class='active'><a href='#"+l.data[e].name+"' data-toggle='tab'>"+l.data[e].name+"</a></li>",s="<div class='tab-pane active' id='"+l.data[e].name+"'></div>";else c="<li><a href='#"+l.data[e].name+"' data-toggle='tab'>"+l.data[e].name+"</a></li>",s="<div class='tab-pane' id='"+l.data[e].name+"'></div>";a+=c,t+=s}i.html(a),r.html(t),$(".nav-pills, .nav-tabs").tabdrop(),$.ajax({type:"POST",url:"part-all.zc",cache:!1,data:JSON.stringify("{'get':'all'}"),dataType:"json",success:function(l){if(0!=l.data.length){for(var a=0;a<l.data.length;a++)$("#"+l.data[a].type).append("<input class='check_aero' type='checkbox' name='"+l.data[a].name+"' alt='"+l.data[a].type+"' >&nbsp;"+l.data[a].name+"&nbsp;&nbsp;&nbsp;");!function(){if($(".check_aero").iCheck({checkboxClass:"icheckbox_flat-aero"}),$(".check_aero").on("ifChecked",function(l){var a=new Array;a.push(l.target.name),a.push(l.target.alt),h.push(a),n.DataTable({destroy:!0,data:h})}).on("ifUnchecked",function(l){for(var a=0;a<h.length;a++)if(h[a][0]==l.target.name&&h[a][1]==l.target.alt){h.splice(a,1);break}n.DataTable({destroy:!0,data:h})}),k.length>0){$(".check_aero").each(function(l,a){k.indexOf(a.name)>-1&&$(a).iCheck("check")})}}()}else toastr.error("暂未配置配件信息，可前往配置！")},error:function(){toastr.error("获取配件信息失败,请刷新重试！")}})},error:function(){i.html(""),r.html(""),toastr.error("获取配件种类信息失败,请刷新重试！")}}),e.on("click",function(){if(isNull(d.val().trim()))toastr.error("长度不能为空！");else if(isInt(d.val().trim()))if(isNull(p.val().trim()))toastr.error("宽度不能为空！");else if(isInt(p.val().trim()))if(isNull(b.val().trim()))toastr.error("高度不能为空！");else if(isInt(b.val().trim()))if(isNull(m.val().trim()))toastr.error("数量不能为空！");else if(isInt(m.val().trim())){for(var l=new Array,a=0;a<h.length;a++)l.push(h[a][0]);var t={count:parseInt(m.val().trim()),source:[{l:parseInt(d.val().trim()),w:parseInt(p.val().trim()),h:parseInt(b.val().trim()),producttype:0,sourcetype:c.val().trim(),sourceusetype:0,btangjin:!1,bfilm:v.is(":checked"),bpress:u.is(":checked"),presstype:o.val().trim()}],parts:l};$.ajax({type:"POST",url:"calculate-price.zc",cache:!1,data:JSON.stringify(t),dataType:"json",success:function(l){$("#input_total_price").val(l.totalprice),$("#input_single_price").val(l.price),$("#log_table").DataTable({ordering:!1,destroy:!0,data:l.log,createdRow:function(l,a,t){"错误"==a[0]?$("td",l).css("color","#f00"):"需求"==a[0]?$("td",l).css("color","#8080C0"):"材料"==a[0]?$("td",l).css("color","#00B271"):"印刷"==a[0]?$("td",l).css("color","#479AC7"):"覆膜"==a[0]?$("td",l).css("color","#B45B3E"):"压痕"==a[0]&&$("td",l).css("color","#6699CC")}}),g.removeAttr("disabled")},error:function(){toastr.error("向服务器请求失败,请稍后重试！")}})}else toastr.error("数量仅能输入数字！");else toastr.error("高度仅能输入数字！");else toastr.error("宽度仅能输入数字！");else toastr.error("长度仅能输入数字！")}),g.on("click",function(){if(isNull(f.val().trim()))toastr.error("客户名称不能为空！");else if(isNull(_.val().trim()))toastr.error("最终总价不能为空！");else if(isInt(_.val().trim())){for(var l=new Array,a=0;a<h.length;a++)l.push(h[a][0]);var t={count:parseInt(m.val().trim()),source:[{l:parseInt(d.val().trim()),w:parseInt(p.val().trim()),h:parseInt(b.val().trim()),producttype:0,sourcetype:c.val().trim(),sourceusetype:0,btangjin:!1,bfilm:v.is(":checked"),bpress:u.is(":checked"),presstype:o.val().trim()}],parts:l},e={customer:f.val().trim(),user:$("#welcome_tip").html().trim(),price:parseFloat($("#input_total_price").val().trim()),finalprice:parseFloat(_.val().trim()),condition:t};$.ajax({type:"POST",url:"order-add.zc",cache:!1,data:JSON.stringify(e),dataType:"json",success:function(l){toastr.success("订单数据保存成功"),g.prop("disabled",!0)},error:function(){toastr.error("向服务器请求失败,请稍后重试！")}})}else toastr.error("最终总价仅能输入数字！")})}var a={},t=$("#ui_body"),e=null,c=null,s=null,o=null,i=null,r=null,n=null,d=null,p=null,b=null,m=null,v=null,u=null,h=new Array,f=null,_=null,g=null,y=null,x=null,k=[];return a.load=function(){l()},a.loadByParam=function(a){l();var t=JSON.parse(a);m.val(t.count),d.val(t.source[0].l),p.val(t.source[0].w),b.val(t.source[0].h),t.source[0].bfilm?v.iCheck("check"):v.iCheck("uncheck"),t.source[0].bpress?u.iCheck("check"):u.iCheck("uncheck"),y=t.source[0].sourcetype,x=t.source[0].presstype,k=t.parts},a}},g_oReticuleCalculate=UIReticuleCalculate.createNew();