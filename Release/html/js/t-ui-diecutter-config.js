var UIDieCutterConfig={createNew:function(){function t(){r.dataTable({destroy:!0,ajax:function(t,l,e){$.ajax({type:"POST",url:m,cache:!1,data:JSON.stringify("{'get':'all'}"),dataType:"json",success:function(e){var o={};o.draw=t.draw,o.recordsTotal=e.recordsTotal,o.recordsFiltered=e.recordsFiltered,o.data=e.data,l(o)}})},columns:b})}function l(){$.ajax({type:"POST",url:"diecutter-getprice.zc",cache:!1,data:JSON.stringify("{'get':'all'}"),dataType:"json",success:function(t){u.val(t.price),v.val(t.boxprice)},error:function(){toastr.error("获取刀模价格失败,请刷新重试！")}})}var e={},o=$("#ui_body"),r=void 0,s=void 0,a=void 0,i=void 0,c=void 0,d=void 0,n=void 0,u=void 0,v=void 0,m="diecutter-all.zc",p="diecutter-add.zc",f="diecutter-del.zc",b=[{data:"producttype"},{data:"type"},{data:null,className:"center",defaultContent:'<a id="delrow" href="#"><i class="fa fa-trash-o"></i>删除</a>'}];return e.load=function(){o.html('<div class="col-md-12 col-sm-12 col-xs-12">                <div class="x_panel">                    <div class="x_title">                        <h2>总览 <small>刀模规格</small></h2>                        <div class="clearfix"></div>                    </div>                    <div class="x_content">                        <p class="text-muted font-13 m-b-30">                            功能描述：此处展示了目前所有的刀模规格信息，您可通过该页面进行修改与删除。                        </p>                        <table id="table_diecutter" class="table table-striped table-bordered">                            <thead>                                <tr>                                    <th>刀模类型</th>                                    <th>刀模规格</th>                                    <th>操作</th>                                </tr>                            </thead>                            <tbody>                            </tbody>                        </table>                    </div>                </div>            </div>            <div class="col-md-12 col-sm-12 col-xs-12">                <div class="x_panel">                    <div class="x_title">                        <h2>新增 <small>刀模规格</small></h2>                        <div class="clearfix"></div>                    </div>                    <div class="x_content">                        <p class="text-muted font-13 m-b-30">                            功能描述：您可通过该页面新增刀模规格。                        </p>                        <div class="form-horizontal form-label-left">                            <div class="form-group">                            <label class="control-label col-md-1 col-sm-1 col-xs-12">刀模类型</label>                            <div class="col-md-2 col-sm-2 col-xs-12">                                <select id="select_type" class="form-control">                                    <option>手提袋</option>                                    <option>礼品盒</option>                                </select>                            </div>                            <label class="control-label col-md-1 col-sm-1 col-xs-12">长(mm)</label>                            <div class="col-md-2 col-sm-2 col-xs-12">                                <input id="input_diecutter_len" type="text" class="form-control" placeholder="">                            </div>                            <label class="control-label col-md-1 col-sm-1 col-xs-12">宽(mm)</label>                            <div class="col-md-2 col-sm-2 col-xs-12">                                <input id="input_diecutter_width" type="text" class="form-control" placeholder="">                            </div>                            <label class="control-label col-md-1 col-sm-1 col-xs-12">高(mm)</label>                            <div class="col-md-2 col-sm-2 col-xs-12">                                <input id="input_diecutter_height" type="text" class="form-control" placeholder="">                            </div>                            </div>                            <div class="ln_solid">                            </div>                            <div class="form-group">                            <div class="col-md-9 col-sm-9 col-xs-12 col-md-offset-1">                                <button id="submit_add_diecutter" class="btn btn-primary">新增</button>                                </div>                            </div>                        </div>                    </div>                </div>            </div>            <div class="col-md-12 col-sm-12 col-xs-12">                <div class="x_panel">                    <div class="x_title">                        <h2>定价 <small>刀模规格</small></h2>                        <div class="clearfix"></div>                    </div>                    <div class="x_content">                        <p class="text-muted font-13 m-b-30">                            功能描述：此处用来设置修改刀模的成本价。                        </p>                        <div class="form-horizontal form-label-left">                            <div class="form-group">                                <label class="control-label col-md-2 col-sm-2 col-xs-12">手提袋刀模单价(元)</label>                                <div class="col-md-4 col-sm-4 col-xs-12">                                    <input id="input_diecutter_price" type="text" class="form-control" placeholder="">                                </div>                                <label class="control-label col-md-2 col-sm-2 col-xs-12">包装盒刀模单价(元)</label>                                <div class="col-md-4 col-sm-5 col-xs-12">                                    <input id="input_diecutter_price_box" type="text" class="form-control" placeholder="">                                </div>                            </div>                        <div class="ln_solid">                        </div>                        <div class="form-group">                        <div class="col-md-9 col-sm-9 col-xs-12 col-md-offset-1">                            <button id="submit_set_diecutterprice" class="btn btn-primary">设置</button>                            </div>                        </div>                    </div>                    </div>                </div>            </div>'),r=$("#table_diecutter"),s=$("#submit_add_diecutter"),a=$("#submit_set_diecutterprice"),i=$("#select_type"),c=$("#input_diecutter_len"),d=$("#input_diecutter_width"),n=$("#input_diecutter_height"),u=$("#input_diecutter_price"),v=$("#input_diecutter_price_box"),a.on("click",function(){if(isNull(u.val().trim()))toastr.error("手提袋刀模单价不能为空！");else if(isPrice(u.val().trim()))if(isNull(v.val().trim()))toastr.error("包装盒刀模单价不能为空！");else if(isPrice(v.val().trim())){var t={price:parseFloat(u.val().trim()),boxprice:parseFloat(v.val().trim())};$.ajax({type:"POST",url:"diecutter-setprice.zc",cache:!1,data:JSON.stringify(t),dataType:"json",success:function(t){toastr.success("新刀模单价设置成功"),l()},error:function(){toastr.error("新刀模单价设置失败,请刷新重试！")}})}else toastr.error("包装盒刀模价格不合法，仅能精确到小数点后两位！");else toastr.error("手提袋刀模价格不合法，仅能精确到小数点后两位！")}),s.on("click",function(){var l;isNull(c.val().trim())?toastr.error("长度不能为空！"):isInt(c.val().trim())?isNull(d.val().trim())?toastr.error("宽度不能为空！"):isInt(d.val().trim())?isNull(n.val().trim())?toastr.error("高度不能为空！"):isInt(n.val().trim())?(l={producttype:i.val().trim(),l:parseInt(c.val().trim()),w:parseInt(d.val().trim()),h:parseInt(n.val().trim())},$.ajax({type:"POST",url:p,contentType:"application/json;charset=utf-8",data:JSON.stringify(l),dataType:"json",success:function(l){0==l.ok?(toastr.success("新刀模规格添加成功"),t(),c.val(""),d.val(""),n.val("")):toastr.error("新刀模规格添加失败,"+l.errorinfo)},error:function(){toastr.error("刀模规格添加失败,请检查服务器及网络后重试！")}})):toastr.error("高度仅能输入数字！"):toastr.error("宽度仅能输入数字！"):toastr.error("长度仅能输入数字！")}),r.on("click","a#delrow",function(l){l.preventDefault;var e=r.DataTable().row($(this).parents("tr")).data(),o="确定要删除刀模规格["+e.type+"]吗?";swal({title:"提示",text:o,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"确定删除",cancelButtonText:"取消"},function(l){if(l){var o={producttype:e.producttype,type:e.type};$.ajax({url:f,type:"POST",dataType:"json",data:JSON.stringify(o),success:function(l){0==l.ok?(toastr.success("刀模规格["+e.type+"]删除成功"),t()):toastr.error("刀模规格["+e.type+"]删除失败,"+l.errorinfo)},error:function(){toastr.error("刀模规格删除失败,请检查服务器及网络后重试！")}})}})}),t(),l()},e}},g_oDieCutterConfig=UIDieCutterConfig.createNew();