var UISourceConfig={createNew:function(){function t(){e.dataTable({destroy:!0,ajax:function(t,l,a){$.ajax({type:"POST",url:u,cache:!1,data:JSON.stringify("{'get':'all'}"),dataType:"json",success:function(a){var e={};e.draw=t.draw,e.recordsTotal=a.recordsTotal,e.recordsFiltered=a.recordsFiltered,e.data=a.data,l(e)}})},columns:f})}var l={},a=$("#ui_body"),e=void 0,o=void 0,s=void 0,r=void 0,c=void 0,i=void 0,d=void 0,n=void 0,m=void 0,u="source-all.zc",v="source-add.zc",p="source-del.zc",f=[{data:"name"},{data:"typename"},{data:"type"},{data:"kez"},{data:"dunj"},{data:"usetype"},{data:null,className:"center",defaultContent:'<a id="delrow" href="#"><i class="fa fa-trash-o"></i>删除</a>'}];return l.load=function(){a.html('<div class="col-md-12 col-sm-12 col-xs-12">                <div class="x_panel">                <div class="x_title">                    <h2>总览 <small>原材料</small></h2>                    <div class="clearfix"></div>                </div>                <div class="x_content">                    <p class="text-muted font-13 m-b-30">                    功能描述：此处展示了目前所有的原材料信息，您可通过该页面进行修改与删除。                    </p>                    <table id="table_source" class="table table-striped table-bordered">                    <thead>                        <tr>                        <th>材料名称</th>                        <th>材料类别</th>                        <th>规格(mm*mm)</th>                        <th>克重(g/m)</th>                        <th>吨价(元/吨)</th>                        <th>用途</th>                        <th>操作</th>                        </tr>                    </thead>                    <tbody>                    </tbody>                    </table>                </div>                </div>            </div>            <div class="col-md-12 col-sm-12 col-xs-12">                <div class="x_panel">                    <div class="x_title">                        <h2>新增 <small>原材料</small></h2>                        <div class="clearfix"></div>                    </div>                    <div class="x_content">                        <p class="text-muted font-13 m-b-30">                            功能描述：您可通过该页面新增原材料。                        </p>                        <div class="form-horizontal form-label-left">                            <div class="form-group">                            <label class="control-label col-md-1 col-sm-1 col-xs-12">材料名称</label>                            <div class="col-md-5 col-sm-5 col-xs-12">                                <input id="input_souce_name" type="text" class="form-control" placeholder="">                            </div>                            <label class="control-label col-md-1 col-sm-1 col-xs-12">材料类别</label>                            <div class="col-md-5 col-sm-5 col-xs-12">                                <select id="select_source_type" class="form-control">                                </select>                            </div>                            </div>                            <div class="form-group">                            <label class="control-label col-md-1 col-sm-1 col-xs-12">长度(mm)</label>                            <div class="col-md-2 col-sm-2 col-xs-12">                                <input id="input_souce_length" type="text" class="form-control" placeholder="">                            </div>                            <label class="control-label col-md-1 col-sm-1 col-xs-12">高度(mm)</label>                            <div class="col-md-2 col-sm-2 col-xs-12">                                <input id="input_souce_width" type="text" class="form-control" placeholder="">                            </div>                            <label class="control-label col-md-1 col-sm-1 col-xs-12">克重(g/m)</label>                            <div class="col-md-2 col-sm-2 col-xs-12">                                <input id="input_souce_kezhong" type="text" class="form-control" placeholder="">                            </div>                            <label class="control-label col-md-1 col-sm-1 col-xs-12">吨价(元/吨)</label>                            <div class="col-md-2 col-sm-2 col-xs-12">                                <input id="input_souce_dunjia" type="text" class="form-control" placeholder="">                            </div>                            </div>                            <div class="form-group">                            <label class="control-label col-md-1 col-sm-1 col-xs-12">材料用途</label>                            <div class="col-md-11 col-sm-11 col-xs-12">                                <select id="select_use_type" class="form-control">                                <option>手提袋</option>                                <option>包装盒</option>                                </select>                            </div>                            </div>                            <div class="ln_solid"></div>                            <div class="form-group">                            <div class="col-md-9 col-sm-9 col-xs-12 col-md-offset-1">                                <button id="submit_add_source" class="btn btn-primary">新增</button>                                </div>                            </div>                        </div>                    </div>                </div>            </div>'),e=$("#table_source"),o=$("#submit_add_source"),s=$("#input_souce_name"),r=$("#select_source_type"),c=$("#input_souce_length"),i=$("#input_souce_width"),d=$("#input_souce_kezhong"),n=$("#input_souce_dunjia"),m=$("#select_use_type"),o.on("click",function(){var l;if(isNull(s.val().trim()))toastr.error("新增材料名不能为空！");else if(isNull(c.val().trim()))toastr.error("新增材料长度不能为空！");else if(isInt(c.val().trim()))if(isNull(i.val().trim()))toastr.error("新增材料宽度不能为空！");else if(isInt(i.val().trim()))if(parseInt(c.val().trim())<parseInt(i.val().trim()))toastr.error("材料长度不能小于宽度值！");else if(isNull(d.val().trim()))toastr.error("新增材料克重不能为空！");else if(isInt(d.val().trim()))if(isNull(n.val().trim()))toastr.error("新增材料吨价不能为空！");else if(isPrice(n.val().trim())){var a=m.val().trim();if("手提袋"==a)l={name:s.val().trim(),typename:r.val().trim(),l:parseInt(c.val().trim()),w:parseInt(i.val().trim()),kez:parseInt(d.val().trim()),dunj:parseFloat(n.val().trim()),usetype:0};else{if("包装盒"!=a)return void toastr.error("请选择材料用途！");l={name:s.val().trim(),typename:r.val().trim(),l:parseInt(c.val().trim()),w:parseInt(i.val().trim()),kez:parseInt(d.val().trim()),dunj:parseFloat(n.val().trim()),usetype:1}}$.ajax({type:"POST",url:v,contentType:"application/json;charset=utf-8",data:JSON.stringify(l),dataType:"json",success:function(l){0==l.ok?(toastr.success("材料["+s.val().trim()+"]添加成功"),t(),s.val(""),c.val(""),i.val(""),d.val(""),n.val("")):toastr.error("材料["+s.val().trim()+"]添加失败,"+l.errorinfo)},error:function(){toastr.error("材料添加失败,请检查服务器及网络后重试！")}})}else toastr.error("材料吨价输入不合法，仅能精确到小数点后两位！");else toastr.error("材料克重仅能输入数字！");else toastr.error("材料宽度仅能输入数字！");else toastr.error("材料长度仅能输入数字！")}),e.on("click","a#delrow",function(l){l.preventDefault;var a=e.DataTable().row($(this).parents("tr")).data(),o="确定要删除材料["+a.name+"]吗?";swal({title:"提示",text:o,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"确定删除",cancelButtonText:"取消"},function(l){if(l){var e={name:a.name};$.ajax({url:p,type:"POST",dataType:"json",data:JSON.stringify(e),success:function(l){0==l.ok?(toastr.success("材料["+a.name+"]删除成功"),t()):toastr.error("材料["+a.name+"]删除失败,"+l.errorinfo)},error:function(){toastr.error("材料删除失败,请检查服务器及网络后重试！")}})}})}),$.ajax({type:"POST",url:"sourcetype-all.zc",cache:!1,data:JSON.stringify("{'get':'all'}"),dataType:"json",success:function(t){if(0==t.data.length)return r.html(""),void toastr.error("暂未配置材料类别信息，请前往配置！");for(var l="",a=0;a<t.data.length;a++)l+="<option>"+t.data[a].name+"</option>";r.html(l)},error:function(){r.html(""),toastr.error("获取材料类别信息失败,请刷新重试！")}}),t()},l}},g_oSourceConfig=UISourceConfig.createNew();