var UIPartConfig={createNew:function(){function t(){r.dataTable({destroy:!0,ajax:function(t,a,l){$.ajax({type:"POST",url:i,cache:!1,data:JSON.stringify("{'get':'all'}"),dataType:"json",success:function(l){var r={};r.draw=t.draw,r.recordsTotal=l.recordsTotal,r.recordsFiltered=l.recordsFiltered,r.data=l.data,a(r)}})},columns:p})}var a={},l=$("#ui_body"),r=void 0,o=void 0,e=void 0,s=void 0,c=void 0,i="part-all.zc",d="part-add.zc",n="part-del.zc",p=[{data:"name"},{data:"type"},{data:"price"},{data:null,className:"center",defaultContent:'<a id="delrow" href="#"><i class="fa fa-trash-o"></i>删除</a>'}];return a.load=function(){l.html('<div class="col-md-12 col-sm-12 col-xs-12">                <div class="x_panel">                    <div class="x_title">                    <h2>总览 <small>配件</small></h2>                    <div class="clearfix"></div>                    </div>                    <div class="x_content">                    <p class="text-muted font-13 m-b-30">                        功能描述：此处展示了目前所有的配件信息，您可通过该页面进行修改与删除。                    </p>                    <table id="table_part" class="table table-striped table-bordered">                        <thead>                        <tr>                            <th>配件名称</th>                            <th>配件种类</th>                            <th>价格</th>                            <th>操作</th>                        </tr>                        </thead>                        <tbody>                        </tbody>                    </table>                    </div>                </div>            </div>            <div class="col-md-12 col-sm-12 col-xs-12">                <div class="x_panel">                    <div class="x_title">                        <h2>新增 <small>配件</small></h2>                        <div class="clearfix"></div>                    </div>                    <div class="x_content">                        <p class="text-muted font-13 m-b-30">                            功能描述：您可通过该页面新增配件。                        </p>                        <div class="form-horizontal form-label-left">                            <div class="form-group">                                <label class="control-label col-md-1 col-sm-1 col-xs-12">配件名称</label>                                <div class="col-md-3 col-sm-3 col-xs-12">                                    <input id="input_part_name" type="text" class="form-control" placeholder="">                                </div>                                <label class="control-label col-md-1 col-sm-1 col-xs-12">配件种类</label>                                <div class="col-md-3 col-sm-3 col-xs-12">                                    <select id="select_part_type" class="form-control">                                    </select>                                </div>                                <label class="control-label col-md-1 col-sm-1 col-xs-12">单价(元)</label>                                <div class="col-md-3 col-sm-3 col-xs-12">                                    <input id="input_part_price" type="text" class="form-control" placeholder="">                                </div>                            </div>                            <div class = "ln_solid" >                             </div>                            <div class = "form-group" >                                 <div class = "col-md-9 col-sm-9 col-xs-12 col-md-offset-1" >                                     <button id = "submit_add_part" class = "btn btn-primary" >新增</button>                                </div >                             </div>                        </div >                     </div>                </div >             </div>'),r=$("#table_part"),o=$("#submit_add_part"),e=$("#input_part_name"),s=$("#select_part_type"),c=$("#input_part_price"),o.on("click",function(){var a;isNull(e.val().trim())?toastr.error("配件名称不能为空！"):isNull(s.val().trim())?toastr.error("尚未选择配件种类！"):isNull(c.val().trim())?toastr.error("价格值不能为空！"):isPrice(c.val().trim())?(a={name:e.val().trim(),type:s.val().trim(),price:parseFloat(c.val().trim())},$.ajax({type:"POST",url:d,contentType:"application/json;charset=utf-8",data:JSON.stringify(a),dataType:"json",success:function(a){0==a.ok?(toastr.success("新配件添加成功"),t(),e.val(""),c.val("")):toastr.error("新配件添加失败,"+a.errorinfo)},error:function(){toastr.error("新配件添加失败,请检查服务器及网络后重试！")}})):toastr.error("配件价格输入不合法，仅能精确到小数点后两位！")}),r.on("click","a#delrow",function(a){a.preventDefault;var l=r.DataTable().row($(this).parents("tr")).data();swal({title:"提示",text:"确定要删除该条记录吗?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"确定删除",cancelButtonText:"取消"},function(a){if(a){var r={name:l.name,type:l.type};$.ajax({url:n,type:"POST",dataType:"json",data:JSON.stringify(r),success:function(a){0==a.ok?(toastr.success("配件删除成功"),t()):toastr.error("配件删除失败,"+a.errorinfo)},error:function(){toastr.error("配件删除失败,请检查服务器及网络后重试！")}})}})}),$.ajax({type:"POST",url:"parttype-all.zc",cache:!1,data:JSON.stringify("{'get':'all'}"),dataType:"json",success:function(t){if(0==t.data.length)return s.html(""),void toastr.error("暂未配置配件种类信息，请前往配置！");for(var a="",l=0;l<t.data.length;l++)a+="<option>"+t.data[l].name+"</option>";s.html(a)},error:function(){s.html(""),toastr.error("获取配件种类信息失败,请刷新重试！")}}),t()},a}},g_oPartConfig=UIPartConfig.createNew();