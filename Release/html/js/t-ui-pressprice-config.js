var UIPresspriceConfig={createNew:function(){function t(){r.dataTable({destroy:!0,ajax:function(t,s,e){$.ajax({type:"POST",url:d,cache:!1,data:JSON.stringify("{'get':'all'}"),dataType:"json",success:function(e){var r={};r.draw=t.draw,r.recordsTotal=e.recordsTotal,r.recordsFiltered=e.recordsFiltered,r.data=e.data,s(r)}})},columns:v})}var s={},e=$("#ui_body"),r=void 0,a=void 0,l=void 0,o=void 0,c=void 0,i=void 0,n=void 0,d="pressprice-all.zc",p="pressprice-add.zc",m="pressprice-del.zc",v=[{data:"pressname"},{data:"presstypename"},{data:"range"},{data:"price"},{data:null,className:"center",defaultContent:'<a id="delrow" href="#"><i class="fa fa-trash-o"></i>删除</a>'}];return s.load=function(){e.html('<div class="col-md-12 col-sm-12 col-xs-12">                <div class="x_panel">                    <div class="x_title">                    <h2>总览 <small>印刷价格</small></h2>                    <div class="clearfix"></div>                    </div>                    <div class="x_content">                    <p class="text-muted font-13 m-b-30">                        功能描述：此处展示了目前所有的印刷价格信息，您可通过该页面进行修改与删除。                    </p>                    <table id="table_pressprice" class="table table-striped table-bordered">                        <thead>                        <tr>                            <th>印刷机名称</th>                            <th>印刷方式</th>                            <th>数量范围(个)</th>                            <th>价格(元)</th>                            <th>操作</th>                        </tr>                        </thead>                        <tbody>                        </tbody>                    </table>                    </div>                </div>            </div>            <div class="col-md-12 col-sm-12 col-xs-12">                <div class="x_panel">                    <div class="x_title">                        <h2>新增 <small>印刷价格规则</small></h2>                        <div class="clearfix"></div>                    </div>                    <div class="x_content">                        <p class="text-muted font-13 m-b-30">                            功能描述：您可通过该页面新增印刷价格规则。                        </p>                        <div class="form-horizontal form-label-left">                            <div class="form-group">                                <label class="control-label col-md-1 col-sm-1 col-xs-12">印刷机名称</label>                                <div class="col-md-5 col-sm-5 col-xs-12">                                    <select id="select_press_name" class="form-control">                                    </select>                                </div>                                <label class="control-label col-md-1 col-sm-1 col-xs-12">印刷方式</label>                                <div class="col-md-5 col-sm-5 col-xs-12">                                    <select id="select_press_type" class="form-control">                                    </select>                                </div>                            </div>                            <div class="form-group">                                <label class="control-label col-md-1 col-sm-1 col-xs-12">范围(个)</label>                                <div class="col-md-3 col-sm-3 col-xs-12">                                    <input id="input_pressprice_begin" type="text" class="form-control" placeholder="">                                </div>                                <label class="control-label col-md-1 col-sm-1 col-xs-12">~</label>                                <div class = "col-md-3 col-sm-3 col-xs-12" >                                     <input id = "input_pressprice_end" type = "text" class = "form-control" placeholder = "" >                                 </div>                                <label class = "control-label col-md-1 col-sm-1 col-xs-12">价格(元)</label>                                <div class = "col-md-3 col-sm-3 col-xs-12" >                                     <input id = "input_pressprice_price" type = "text" class = "form-control" placeholder = "" >                                 </div>                            </div>                            <div class = "ln_solid" >                             </div>                            <div class = "form-group" >                                 <div class = "col-md-9 col-sm-9 col-xs-12 col-md-offset-1" >                                     <button id = "submit_add_pressprice" class = "btn btn-primary" >新增</button>                                </div >                             </div>                        </div >                     </div>                </div >             </div>'),r=$("#table_pressprice"),a=$("#submit_add_pressprice"),l=$("#select_press_name"),o=$("#select_press_type"),c=$("#input_pressprice_begin"),i=$("#input_pressprice_end"),n=$("#input_pressprice_price"),a.on("click",function(){var s;isNull(c.val().trim())?toastr.error("范围起始值不能为空！"):isInt(c.val().trim())?isNull(i.val().trim())?toastr.error("范围结束值不能为空！"):isInt(i.val().trim())?isNull(n.val().trim())?toastr.error("价格值不能为空！"):isPrice(n.val().trim())?(s={pressname:l.val().trim(),presstypename:o.val().trim(),begin:parseInt(c.val().trim()),end:parseInt(i.val().trim()),price:parseFloat(n.val().trim())},$.ajax({type:"POST",url:p,contentType:"application/json;charset=utf-8",data:JSON.stringify(s),dataType:"json",success:function(s){0==s.ok?(toastr.success("印刷价格规则添加成功"),t(),c.val(""),i.val(""),n.val("")):toastr.error("印刷价格规则添加失败,"+s.errorinfo)},error:function(){toastr.error("印刷价格规则添加失败,请检查服务器及网络后重试！")}})):toastr.error("价格值输入不合法，仅能精确到小数点后两位！"):toastr.error("范围结束值仅能输入数字！"):toastr.error("范围起始值仅能输入数字！")}),r.on("click","a#delrow",function(s){s.preventDefault;var e=r.DataTable().row($(this).parents("tr")).data();swal({title:"提示",text:"确定要删除该条记录吗?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"确定删除",cancelButtonText:"取消"},function(s){if(s){var r={pressname:e.pressname,presstypename:e.presstypename,range:e.range};$.ajax({url:m,type:"POST",dataType:"json",data:JSON.stringify(r),success:function(s){0==s.ok?(toastr.success("印刷价格规则删除成功"),t()):toastr.error("印刷价格规则删除失败,"+s.errorinfo)},error:function(){toastr.error("印刷方式删除失败,请检查服务器及网络后重试！")}})}})}),$.ajax({type:"POST",url:"press-all.zc",cache:!1,data:JSON.stringify("{'get':'all'}"),dataType:"json",success:function(t){if(0==t.data.length)return l.html(""),void toastr.error("暂未配置印刷机信息，请前往配置！");for(var s="",e=0;e<t.data.length;e++)s+="<option>"+t.data[e].name+"</option>";l.html(s)},error:function(){l.html(""),toastr.error("获取印刷机信息失败,请刷新重试！")}}),$.ajax({type:"POST",url:"presstype-all.zc",cache:!1,data:JSON.stringify("{'get':'all'}"),dataType:"json",success:function(t){if(0==t.data.length)return o.html(""),void toastr.error("暂未配置印刷方式信息，请前往配置！");for(var s="",e=0;e<t.data.length;e++)s+="<option>"+t.data[e].name+"</option>";o.html(s)},error:function(){o.html(""),toastr.error("获取印刷方式信息失败,请刷新重试！")}}),t()},s}},g_oPresspriceConfig=UIPresspriceConfig.createNew();